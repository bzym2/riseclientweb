<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>上升客户端下载</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <style>
    /* 背景粒子画布占位 */
    #bg-canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
    /* 毛玻璃卡片的半透明白（深色背景下好看） */
    .glass {
      backdrop-filter: blur(12px) saturate(120%);
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
    }
    /* 呼吸发光效果 */
    .glow {
      box-shadow: 0 6px 30px rgba(99,102,241,0.28), inset 0 -6px 30px rgba(236,72,153,0.06);
      transition: box-shadow .35s, transform .18s;
    }
    /* 按钮点击 ripple 的容器 */
    .ripple {
      position: relative;
      overflow: hidden;
    }
    .ripple span {
      position: absolute;
      border-radius: 9999px;
      transform: translate(-50%, -50%) scale(0);
      pointer-events: none;
      opacity: .6;
      background: rgba(255,255,255,0.35);
      width: 10px; height: 10px;
      transition: transform .6s cubic-bezier(.2,.8,.2,1), opacity .6s;
    }
    /* 卡片 hover 3D */
    .tilt { transform-style: preserve-3d; transition: transform .35s cubic-bezier(.2,.8,.2,1); }
    /* SVG check initial style */
    .check-svg { width: 96px; height: 96px; stroke: #0ea5a8; stroke-width: 4; fill: none; stroke-linecap: round; stroke-linejoin: round; }
  </style>
</head>
<body class="min-h-screen antialiased text-white relative overflow-x-hidden" style="background:linear-gradient(120deg,#0ea5f6,#7c3aed,#ec4899);">

  <!-- 粒子canvas（在页面最底） -->
  <canvas id="bg-canvas"></canvas>

  <!-- 顶部 logo & 标题 -->
  <header class="relative z-20 py-8 flex flex-col items-center">
    <img src="https://proxy.bzym.fun/https://riseclient.com/images/rise.png" alt="Rise" class="h-20 mb-4 drop-shadow-2xl transform" id="logo">
    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight drop-shadow-lg">上升客户端最新最热破解。</h1>
    <p class="mt-2 text-sm text-white/80">宝宝嘟嘟打雷啦。这个逼里昂尼尔。被破解了咯咯哒。</p>
  </header>

  <!-- 内容容器 -->
  <main class="relative z-20 max-w-6xl mx-auto px-6 pb-16">
    <section class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">

      <!-- 左栏：最新版卡片（固定显眼） -->
      <div class="lg:col-span-2">
        <div id="latestCard" class="glass rounded-3xl p-6 lg:p-8 tilt transform-gpu shadow-2xl">
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div>
              <div class="inline-flex items-center space-x-3">
                <span class="px-3 py-1 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full text-sm font-medium">最新</span>
                <h2 id="latestVersion" class="text-2xl md:text-3xl font-bold tracking-tight">6.6.9</h2>
              </div>
              <p id="latestDate" class="mt-2 text-sm text-white/80">发行日期：2025-09-02</p>
              <p class="mt-4 text-sm text-white/70 max-w-xl">说明：修复ViaVersion。</p>
            </div>

            <div class="flex items-center space-x-4">
              <!-- 大尺寸渐变按钮：对角渐变，角度与颜色更“高级” -->
              <button id="downloadLatest" class="ripple relative overflow-hidden px-6 py-3 rounded-2xl text-white font-semibold shadow-glow transform-gpu glow"
                style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 40%, #8b5cf6 100%);">
                <span class="relative z-10">下载 · 境外云盘</span>
              </button>
              <!-- 小按钮：镜像/说明（可扩展） -->
              <button id="moreBtn" class="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/12 text-sm">更多</button>
            </div>
          </div>

          <!-- 下面加一排浮动信息小卡（进场动画） -->
          <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="bg-white/5 p-3 rounded-lg text-sm">
              <div class="text-xs text-white/80">版本大小</div>
              <div class="font-medium mt-1">~500 MB</div>
            </div>
            <div class="bg-white/5 p-3 rounded-lg text-sm">
              <div class="text-xs text-white/80">兼容性</div>
              <div class="font-medium mt-1">Android 9+</div>
            </div>
            <div class="bg-white/5 p-3 rounded-lg text-sm">
              <div class="text-xs text-white/80">签名</div>
              <div class="font-medium mt-1">SHA256 ✓</div>
            </div>
            <div class="bg-white/5 p-3 rounded-lg text-sm">
              <div class="text-xs text-white/80">更新</div>
              <div class="font-medium mt-1">性能优化</div>
            </div>
          </div>
        </div>

        <!-- 历史版本横向滑动区域（可拖动） -->
        <div class="mt-6">
          <h3 class="text-white/90 mb-3 font-semibold">历史版本</h3>
          <div id="historyScroll" class="flex gap-4 overflow-x-auto pb-3 scroll-smooth">
            <!-- 历史卡片由 JS 填充 -->
          </div>
        </div>
      </div>

      <!-- 右侧：细节/行动栏 -->
      <aside class="space-y-6">
        <div class="glass rounded-2xl p-5 tilt shadow-lg">
          <h4 class="font-semibold">下载助手</h4>
          <p class="mt-2 text-sm text-white/80">点击「下载 · 境外云盘」，确认后将在 3 秒内跳转至下载页面。</p>
          <div class="mt-4">
            <button id="quickDownload" class="w-full ripple px-4 py-2 rounded-xl text-sm font-medium" style="background: linear-gradient(90deg,#06b6d4,#06b6d4); color:#042f3e;">一键下载</button>
          </div>
        </div>

        <div class="glass rounded-2xl p-5 tilt shadow-lg">
          <h4 class="font-semibold">说明</h4>
          <p class="mt-2 text-sm text-white/80">为保障下载速度与稳定性，本页面仅提供境外云盘下载。所有链接均经过测试，你打不开你就去买个梯子 别叭叭我。</p>
        </div>
      </aside>

    </section>
  </main>

  <!-- 居中 Popup（白色卡片） -->
  <div id="popup" class="fixed inset-0 z-40 hidden items-center justify-center">
    <div id="overlay" class="absolute inset-0 bg-black/50"></div>
    <div id="popupCard" class="relative bg-white rounded-2xl w-[92%] max-w-md p-6 shadow-2xl">
      <!-- 顶部返回/下一步 -->
      <div class="flex justify-between items-center mb-4">
        <button id="popupBack" class="text-sky-600 hover:underline">返回</button>
        <div class="text-sm font-semibold">选择下载线路</div>
        <button id="popupNext" class="text-sky-600 opacity-60 cursor-not-allowed">下一步</button>
      </div>

      <!-- 内容区域：只有境外云盘 -->
      <div id="popupContent" class="space-y-4">
        <div class="p-4 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 2l3 7h7l-5.5 4 2 7L12 16l-6.5 4 2-7L2 9h7l3-7z"/>
          </svg>
          <div>
            <div class="font-medium">境外云盘</div>
            <div id="gdrivePreview" class="text-sm text-slate-500">workupload.com/.../file</div>
          </div>
          <div class="ml-auto">
            <label class="inline-flex items-center cursor-pointer">
              <input id="gdriveRadio" type="radio" name="mirror" checked class="accent-sky-600">
            </label>
          </div>
        </div>

        <p class="text-sm text-slate-500">唯一线路 —— 选中后点击「下一步」立即跳转。</p>
      </div>

      <!-- 成功区（隐藏，显示对勾动画与倒计时） -->
      <div id="popupSuccess" class="hidden text-center p-4">
        <svg class="check-svg mx-auto mb-3" viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg">
          <path id="circlePath" d="M26 4a22 22 0 1 1 0 44 22 22 0 0 1 0-44" stroke="#0ea5a8" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          <path id="checkPath" d="M16 27l7 7 13-14" stroke="#0ea5a8" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        </svg>
        <div class="text-slate-700 font-medium" id="successText">将在 <span id="countdown">3</span> 秒后跳转到境外云盘</div>
      </div>
    </div>
  </div>

  <!-- JS：数据 + 交互 + 动画 -->
  <script>
    // ====== 数据：版本与境外云盘链接 ======
    const downloads = [
      { version: "6.6.9 fix via version", date: "2025-08-22", google: "https://workupload.com/file/6fYQCgcrWeJ", latest: true },
      { version: "6.6.8", date: "2025-08-20", google: "https://workupload.com/file/AgvszeXscuv" },
      { version: "6.6.7", date: "2025-08-20", google: "https://www.mediafire.com/file/08n1iaq0zb95b1h/Rise+v6+New.zip/file" },
      { version: "Rise Crack 6.6.6", date: "2025-07-25", google: "https://workupload.com/file/fNwZrLxDbem" }
    ];

    // ====== 渲染历史卡片到横向滚动区 ======
    const historyScroll = document.getElementById('historyScroll');
    downloads.slice(1).forEach(d => {
      const card = document.createElement('div');
      card.className = 'min-w-[220px] bg-white/6 rounded-2xl p-4 tilt glass shadow-md flex flex-col';
      card.innerHTML = `
        <div class="flex items-center justify-between">
          <div>
            <div class="text-sm text-white/80">版本</div>
            <div class="font-semibold mt-1">${d.version}</div>
            <div class="text-xs text-white/70 mt-1">${d.date}</div>
          </div>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <button class="old-download flex-1 bg-gradient-to-r from-gray-600 to-gray-700 text-white py-2 rounded-lg text-sm">历史下载</button>
        </div>
      `;
      historyScroll.appendChild(card);

      // small hover tilt for each history card
      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width - 0.5;
        const y = (e.clientY - rect.top) / rect.height - 0.5;
        card.style.transform = `rotateX(${ -y * 5 }deg) rotateY(${ x * 5 }deg) translateZ(0)`;
      });
      card.addEventListener('mouseleave', () => card.style.transform = '');
    });

    // ====== 动画入口：logo + cards fade-in ======
    gsap.from("#logo", { duration: 0.8, scale: 0.9, opacity: 0, ease: "power2.out" });
    gsap.from("#latestCard", { duration: 0.9, y: 20, opacity: 0, ease: "back.out(1.2)", delay: 0.15 });
    gsap.from(".glass > .tilt, .glass .p-3", { duration: 0.8, y: 10, opacity: 0, stagger: 0.08, delay: 0.25 });

    // hover tilt for the main latest card
    const latestCard = document.getElementById('latestCard');
    latestCard.addEventListener('mousemove', (e) => {
      const rect = latestCard.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width - 0.5;
      const y = (e.clientY - rect.top) / rect.height - 0.5;
      latestCard.style.transform = `perspective(800px) rotateX(${ -y * 6 }deg) rotateY(${ x * 6 }deg) translateZ(0)`;
    });
    latestCard.addEventListener('mouseleave', () => latestCard.style.transform = '');

    // ====== ripple 效果 for .ripple buttons ======
    function createRipple(e) {
      const btn = e.currentTarget;
      const span = document.createElement('span');
      btn.appendChild(span);
      const rect = btn.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height) * 1.6;
      span.style.width = span.style.height = size + 'px';
      span.style.left = (e.clientX - rect.left) + 'px';
      span.style.top = (e.clientY - rect.top) + 'px';
      // animate
      requestAnimationFrame(() => span.style.transform = 'translate(-50%,-50%) scale(1)');
      span.style.opacity = '0';
      setTimeout(() => span.remove(), 650);
    }
    document.querySelectorAll('.ripple').forEach(b => b.addEventListener('click', createRipple));

    // ====== Popup 控制 & 动画 ======
    const popup = document.getElementById('popup');
    const overlay = document.getElementById('overlay');
    const popupCard = document.getElementById('popupCard');
    const popupNext = document.getElementById('popupNext');
    const popupBack = document.getElementById('popupBack');
    const gdriveRadio = document.getElementById('gdriveRadio');
    const gdrivePreview = document.getElementById('gdrivePreview');
    const popupContent = document.getElementById('popupContent');
    const popupSuccess = document.getElementById('popupSuccess');
    const successText = document.getElementById('successText');
    const countdownEl = document.getElementById('countdown');
    let selectedLink = null;
    let activeVersion = downloads[0]; // 默认最新

    // fill preview link
    function setPreview(versionObj) {
      const url = versionObj.google;
      gdrivePreview.textContent = url.replace(/^https?:\/\//, '').split('?')[0].split('#')[0];
      selectedLink = url;
    }
    setPreview(activeVersion);

    // open popup
    function openPopup(versionObj) {
      activeVersion = versionObj;
      setPreview(versionObj);
      // reset states
      popupContent.classList.remove('hidden');
      popupSuccess.classList.add('hidden');
      popupNext.classList.add('opacity-60', 'cursor-not-allowed');
      popupNext.disabled = false; // remain clickable (since only one option) but visually disabled until small delay
      // show container
      popup.classList.remove('hidden');
      // animate: overlay fade + popup drop-in
      gsap.fromTo(overlay, { opacity: 0 }, { opacity: 0.5, duration: 0.25 });
      gsap.fromTo(popupCard, { y: -30, scale: 0.98, opacity: 0 }, { y: 0, scale: 1, opacity: 1, duration: 0.45, ease: "back.out(1.2)" });
      // small delay then enable next (mimic selection)
      setTimeout(() => {
        popupNext.classList.remove('opacity-60', 'cursor-not-allowed');
      }, 220);
    }

    // close popup
    function closePopup() {
      gsap.to(popupCard, { y: -10, scale: 0.98, opacity: 0, duration: 0.18 });
      gsap.to(overlay, { opacity: 0, duration: 0.18, onComplete: () => popup.classList.add('hidden') });
    }

    // bind main buttons
    document.getElementById('downloadLatest').addEventListener('click', (e) => {
      openPopup(downloads[0]);
    });
    document.getElementById('quickDownload').addEventListener('click', () => openPopup(downloads[0]));

    // 绑定历史版本按钮
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('old-download')) {
        const card = e.target.closest('.min-w-\\[220px\\]');
        const index = Array.from(historyScroll.children).indexOf(card);
        if (index !== -1) {
          openPopup(downloads[index + 1]); // +1 because slice(1)
        }
      }
    });

    // back button
    popupBack.addEventListener('click', closePopup);

    // Next button: play check animation + countdown + redirect
    popupNext.addEventListener('click', () => {
      // hide content, show success
      popupContent.classList.add('hidden');
      popupSuccess.classList.remove('hidden');

      // animate SVG paths (stroke-dasharray technique)
      const circle = document.getElementById('circlePath');
      const check = document.getElementById('checkPath');
      // prepare
      const circleLen = circle.getTotalLength();
      const checkLen = check.getTotalLength();
      circle.style.strokeDasharray = circleLen;
      circle.style.strokeDashoffset = circleLen;
      check.style.strokeDasharray = checkLen;
      check.style.strokeDashoffset = checkLen;
      // timeline
      const tl = gsap.timeline();
      tl.to(circle, { strokeDashoffset: 0, duration: 0.7, ease: "power2.out" });
      tl.to(check, { strokeDashoffset: 0, duration: 0.45, ease: "power2.out" }, "-=0.12");
      tl.fromTo('#popupSuccess .check-svg', { scale: 0.8, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.4 }, "-=0.3");

      // countdown & redirect
      let sec = 3;
      countdownEl.textContent = sec;
      const countdown = setInterval(() => {
        sec--;
        countdownEl.textContent = sec;
        if (sec <= 0) {
          clearInterval(countdown);
          // jump to境外云盘
          window.open(selectedLink, '_blank');
        }
      }, 1000);
    });

    // close if clicking outside card
    overlay.addEventListener('click', closePopup);

    // ====== background particles (canvas) driven by GSAP tick ======
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let DPR = Math.max(1, window.devicePixelRatio || 1);
    function resizeCanvas(){
      DPR = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = innerWidth * DPR;
      canvas.height = innerHeight * DPR;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.scale(DPR, DPR);
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // generate particles
    const particles = [];
    const PCOUNT = Math.max(24, Math.floor((innerWidth * innerHeight) / 90000));
    for (let i = 0; i < PCOUNT; i++) {
      particles.push({
        x: Math.random() * innerWidth,
        y: Math.random() * innerHeight,
        r: 0.8 + Math.random() * 2.5,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.2,
        hue: 180 + Math.random() * 160,
        alpha: 0.08 + Math.random() * 0.18
      });
    }

    function drawParticles() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach(p => {
        ctx.beginPath();
        const grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r * 6);
        grd.addColorStop(0, `hsla(${p.hue}, 85%, 60%, ${p.alpha})`);
        grd.addColorStop(0.5, `hsla(${p.hue}, 85%, 50%, ${p.alpha * 0.65})`);
        grd.addColorStop(1, `hsla(${p.hue}, 85%, 40%, 0)`);
        ctx.fillStyle = grd;
        ctx.arc(p.x, p.y, p.r * 6, 0, Math.PI * 2);
        ctx.fill();
        // move
        p.x += p.vx;
        p.y += p.vy;
        // wrap
        if (p.x < -50) p.x = innerWidth + 50;
        if (p.x > innerWidth + 50) p.x = -50;
        if (p.y < -50) p.y = innerHeight + 50;
        if (p.y > innerHeight + 50) p.y = -50;
      });
      requestAnimationFrame(drawParticles);
    }
    drawParticles();

    // keyboard escape to close popup
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && !popup.classList.contains('hidden')) closePopup();
    });

    // small accessibility tweak: tap history scroll left/right by drag on mobile
    let isDown = false, startX, scrollLeft;
    const slider = document.getElementById('historyScroll');
    slider.addEventListener('mousedown', (e) => {
      isDown = true; slider.classList.add('cursor-grabbing');
      startX = e.pageX - slider.offsetLeft;
      scrollLeft = slider.scrollLeft;
    });
    slider.addEventListener('mouseleave', () => { isDown = false; slider.classList.remove('cursor-grabbing'); });
    slider.addEventListener('mouseup', () => { isDown = false; slider.classList.remove('cursor-grabbing'); });
    slider.addEventListener('mousemove', (e) => {
      if(!isDown) return;
      e.preventDefault();
      const x = e.pageX - slider.offsetLeft;
      const walk = (x - startX) * 1.2;
      slider.scrollLeft = scrollLeft - walk;
    });

    // prevent accidental text selection while dragging
    slider.addEventListener('selectstart', (e) => { if(isDown) e.preventDefault(); });

    // initial small micro-animations to keep the page alive
    gsap.to('.glow', { boxShadow: "0 12px 40px rgba(124,58,237,0.32), inset 0 -8px 30px rgba(236,72,153,0.06)", duration: 2.8, repeat: -1, yoyo: true });
  </script>
</body>
</html>
